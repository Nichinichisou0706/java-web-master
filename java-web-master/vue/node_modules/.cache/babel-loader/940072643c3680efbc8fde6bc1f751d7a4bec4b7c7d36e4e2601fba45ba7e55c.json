{"ast":null,"code":"import request from \"../../utils/request\";\nimport Cookies from 'js-cookie';\nexport default {\n  name: \"searchList\",\n  data() {\n    return {\n      tableData: [],\n      user: Cookies.get('user') ? JSON.parse(Cookies.get('user')) : {},\n      total: '',\n      params: {\n        username: '',\n        courseCode: '',\n        courseName: '',\n        pageNum: 1,\n        pageSize: 10\n      },\n      searchCourseParams: {\n        teachId: '',\n        studentId: ''\n      }\n    };\n  },\n  //页面加载之后会调用\n  created() {\n    this.user = Cookies.get('user') ? JSON.parse(Cookies.get('user')) : {};\n    this.params.username = this.user.username;\n    this.load();\n  },\n  methods: {\n    load() {\n      request.get(\"/stu/searchList\", {\n        params: this.params\n      }).then(res => {\n        if (res.code === '200') {\n          this.tableData = res.data.list;\n          this.total = res.data.total;\n        } else {\n          alert(res.msg);\n        }\n      });\n    },\n    reset() {\n      this.params.courseCode = '';\n      this.params.courseName = '';\n      this.padding.pageNum = 1;\n      this.padding.pageSize = 10;\n      this.load();\n    },\n    handleCurrentChange(pageNum) {\n      this.params.pageNum = pageNum;\n      this.load();\n    },\n    handleSizeChange(pageSize) {\n      this.params.pageSize = pageSize;\n      this.load();\n    },\n    handleEdit(id) {\n      this.searchCourseParams.teachId = id;\n      this.searchCourseParams.studentId = this.user.username;\n      request.post(\"/stu/add\", this.searchCourseParams).then(res => {\n        if (res.code === '200') {\n          this.$notify.success(\"恭喜您选课成功~\");\n          this.load();\n        } else {\n          alert(res.msg);\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["request","Cookies","name","data","tableData","user","get","JSON","parse","total","params","username","courseCode","courseName","pageNum","pageSize","searchCourseParams","teachId","studentId","created","load","methods","then","res","code","list","alert","msg","reset","padding","handleCurrentChange","handleSizeChange","handleEdit","id","post","$notify","success"],"sources":["src/views/stu/searchList.vue"],"sourcesContent":["<template>\n    <div>\n\n        <!--搜索框-->\n        <div style=\"margin-bottom: 15px\">\n            <el-input style=\"width: 240px\" placeholder=\"请输入景点代码\" v-model=\"params.courseCode\"></el-input>\n            <el-input style=\"width: 240px; margin-left: 5px\" placeholder=\"请输入景点名\" v-model=\"params.courseName\"></el-input>\n            <el-button style=\"margin-left: 5px\" type=\"primary\" @click=\"load\"><i class=\"el-icon-search\"></i>&ensp;搜索</el-button>\n            <el-button style=\"margin-left: 5px\" type=\"warning\" @click=\"reset\"><i class=\"el-icon-refresh\"></i>&ensp;重置</el-button>\n        </div>\n\n        <el-table :data=\"tableData\" border stripe>\n            <el-table-column prop=\"teacherName\" label=\"教师姓名\" ></el-table-column>\n            <el-table-column prop=\"courseName\" label=\"课程名\"></el-table-column>\n            <el-table-column prop=\"courseCode\" label=\"课程代码\" ></el-table-column>\n            <el-table-column prop=\"day\" label=\"时间\" ></el-table-column>\n            <el-table-column prop=\"time\" label=\"时间\" ></el-table-column>\n            <el-table-column prop=\"begin\" label=\"起始周\" ></el-table-column>\n            <el-table-column prop=\"end\" label=\"结束周\" ></el-table-column>\n            <el-table-column prop=\"roomName\" label=\"教室\"></el-table-column>\n            <el-table-column prop=\"now\" label=\"已选人数\"></el-table-column>\n            <el-table-column prop=\"max\" label=\"限选人数\"></el-table-column>\n            <el-table-column fixed=\"right\" label=\"操作\" width=\"150px\">\n                <template #default=\"scope\">\n                    <el-button size=\"mini\" type=\"primary\" v-if=\"scope.row.now < scope.row.max\" @click=\"handleEdit(scope.row.id)\">选课</el-button>\n                </template>\n            </el-table-column>\n        </el-table>\n\n        <!--分页-->\n        <div style=\"margin-top: 20px\">\n            <el-pagination\n                    background\n                    @size-change=\"handleSizeChange\"\n                    @current-change=\"handleCurrentChange\"\n                    layout=\"total, sizes, prev, pager, next, jumper\"\n                    :current-page=\"params.pageNum\"\n                    :page-sizes=\"[5, 10, 20]\"\n                    :page-size=\"params.pageSize\"\n                    :total=\"total\">\n            </el-pagination>\n        </div>\n\n    </div>\n\n</template>\n\n<script>\n\n    import request from \"../../utils/request\";\n    import Cookies from 'js-cookie';\n\n    export default {\n        name: \"searchList\",\n        data() {\n            return {\n                tableData: [],\n                user: Cookies.get('user') ? JSON.parse(Cookies.get('user')) : {},\n                total: '',\n                params: {\n                    username: '',\n                    courseCode:'',\n                    courseName:'',\n                    pageNum: 1,\n                    pageSize: 10,\n                },\n                searchCourseParams: {\n                    teachId: '',\n                    studentId: '',\n                }\n            }\n        },\n\n        //页面加载之后会调用\n        created() {\n            this.user = Cookies.get('user') ? JSON.parse(Cookies.get('user')) : {};\n            this.params.username = this.user.username;\n            this.load();\n        },\n\n        methods: {\n\n            load() {\n                request.get(\"/stu/searchList\", { params: this.params }).then(res => {\n                    if (res.code === '200'){\n                        this.tableData = res.data.list;\n                        this.total = res.data.total;\n                    } else {\n                        alert(res.msg);\n                    }\n                })\n            },\n\n            reset() {\n                this.params.courseCode = '';\n                this.params.courseName = '';\n                this.padding.pageNum = 1;\n                this.padding.pageSize = 10;\n                this.load();\n            },\n\n            handleCurrentChange(pageNum){\n                this.params.pageNum = pageNum;\n                this.load();\n            },\n\n            handleSizeChange(pageSize){\n                this.params.pageSize = pageSize;\n                this.load();\n            },\n\n            handleEdit(id){\n                this.searchCourseParams.teachId = id;\n                this.searchCourseParams.studentId = this.user.username;\n                request.post(\"/stu/add\", this.searchCourseParams).then(res => {\n                    if (res.code === '200'){\n                        this.$notify.success(\"恭喜您选课成功~\");\n                        this.load();\n                    } else {\n                        alert(res.msg);\n                    }\n                })\n            },\n\n        }\n    }\n</script>\n\n<style scoped>\n\n</style>"],"mappings":"AAiDA,OAAAA,OAAA;AACA,OAAAC,OAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,SAAA;MACAC,IAAA,EAAAJ,OAAA,CAAAK,GAAA,WAAAC,IAAA,CAAAC,KAAA,CAAAP,OAAA,CAAAK,GAAA;MACAG,KAAA;MACAC,MAAA;QACAC,QAAA;QACAC,UAAA;QACAC,UAAA;QACAC,OAAA;QACAC,QAAA;MACA;MACAC,kBAAA;QACAC,OAAA;QACAC,SAAA;MACA;IACA;EACA;EAEA;EACAC,QAAA;IACA,KAAAd,IAAA,GAAAJ,OAAA,CAAAK,GAAA,WAAAC,IAAA,CAAAC,KAAA,CAAAP,OAAA,CAAAK,GAAA;IACA,KAAAI,MAAA,CAAAC,QAAA,QAAAN,IAAA,CAAAM,QAAA;IACA,KAAAS,IAAA;EACA;EAEAC,OAAA;IAEAD,KAAA;MACApB,OAAA,CAAAM,GAAA;QAAAI,MAAA,OAAAA;MAAA,GAAAY,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAApB,SAAA,GAAAmB,GAAA,CAAApB,IAAA,CAAAsB,IAAA;UACA,KAAAhB,KAAA,GAAAc,GAAA,CAAApB,IAAA,CAAAM,KAAA;QACA;UACAiB,KAAA,CAAAH,GAAA,CAAAI,GAAA;QACA;MACA;IACA;IAEAC,MAAA;MACA,KAAAlB,MAAA,CAAAE,UAAA;MACA,KAAAF,MAAA,CAAAG,UAAA;MACA,KAAAgB,OAAA,CAAAf,OAAA;MACA,KAAAe,OAAA,CAAAd,QAAA;MACA,KAAAK,IAAA;IACA;IAEAU,oBAAAhB,OAAA;MACA,KAAAJ,MAAA,CAAAI,OAAA,GAAAA,OAAA;MACA,KAAAM,IAAA;IACA;IAEAW,iBAAAhB,QAAA;MACA,KAAAL,MAAA,CAAAK,QAAA,GAAAA,QAAA;MACA,KAAAK,IAAA;IACA;IAEAY,WAAAC,EAAA;MACA,KAAAjB,kBAAA,CAAAC,OAAA,GAAAgB,EAAA;MACA,KAAAjB,kBAAA,CAAAE,SAAA,QAAAb,IAAA,CAAAM,QAAA;MACAX,OAAA,CAAAkC,IAAA,kBAAAlB,kBAAA,EAAAM,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAAW,OAAA,CAAAC,OAAA;UACA,KAAAhB,IAAA;QACA;UACAM,KAAA,CAAAH,GAAA,CAAAI,GAAA;QACA;MACA;IACA;EAEA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}