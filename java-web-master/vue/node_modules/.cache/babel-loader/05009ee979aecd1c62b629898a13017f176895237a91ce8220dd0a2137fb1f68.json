{"ast":null,"code":"import request from \"../../utils/request\";\nexport default {\n  name: \"list\",\n  data() {\n    return {\n      total: '',\n      tableData: [],\n      params: {\n        username: '',\n        name: '',\n        phone: '',\n        role: '',\n        pageNum: 1,\n        pageSize: 10\n      }\n    };\n  },\n  //页面加载之后会调用\n  created() {\n    this.load();\n  },\n  methods: {\n    load() {\n      request.get(\"/user/page\", {\n        params: this.params\n      }).then(res => {\n        if (res.code === '200') {\n          this.tableData = res.data.list;\n          this.total = res.data.total;\n        } else {\n          alert(res.msg);\n        }\n      });\n    },\n    reset() {\n      this.params = {\n        name: '',\n        phone: '',\n        role: '',\n        pageNum: 1,\n        pageSize: 10\n      };\n      this.load();\n    },\n    handleCurrentChange(pageNum) {\n      this.params.pageNum = pageNum;\n      this.load();\n    },\n    handleSizeChange(pageSize) {\n      this.params.pageSize = pageSize;\n      this.load();\n    },\n    handleSet(id) {\n      request.post('/user/update/' + id).then(res => {\n        if (res.code === '200') {\n          this.$notify.success(\"重置密码成功\");\n        } else {\n          alert(res.msg);\n        }\n      });\n    },\n    handleDelete(id) {\n      request.delete('/user/delete/' + id).then(res => {\n        if (res.code === '200') {\n          alert(\"删除成功\");\n          this.load();\n        } else {\n          alert(res.msg);\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["request","name","data","total","tableData","params","username","phone","role","pageNum","pageSize","created","load","methods","get","then","res","code","list","alert","msg","reset","handleCurrentChange","handleSizeChange","handleSet","id","post","$notify","success","handleDelete","delete"],"sources":["src/views/user/list.vue"],"sourcesContent":["<template>\n    <div>\n\n        <!--搜索框-->\n        <div style=\"margin-bottom: 15px\">\n            <el-input style=\"width: 240px\" placeholder=\"请输入用户名\" v-model=\"params.username\"></el-input>\n            <el-input style=\"width: 240px; margin-left: 5px\" placeholder=\"请输入姓名\" v-model=\"params.name\"></el-input>\n            <el-input style=\"width: 240px; margin-left: 5px; margin-right: 5px\" placeholder=\"请输入联系方式\" v-model=\"params.phone\"></el-input>\n            <el-select v-model=\"params.role\" style=\"width: 150px\" placeholder=\"请选择身份\">\n                <el-option label=\"请选择身份\" value=\"\"></el-option>\n                <el-option label=\"用户\" value=\"用户\"></el-option>\n                <el-option label=\"商家\" value=\"商家\"></el-option>\n            </el-select>\n            <el-button style=\"margin-left: 5px\" type=\"primary\" @click=\"load\"><i class=\"el-icon-search\"></i>&ensp;搜索</el-button>\n            <el-button style=\"margin-left: 5px\" type=\"warning\" @click=\"reset\"><i class=\"el-icon-refresh\"></i>&ensp;重置</el-button>\n        </div>\n\n        <el-table :data=\"tableData\" border stripe>\n            <el-table-column prop=\"username\" label=\"用户名\"></el-table-column>\n            <el-table-column prop=\"name\" label=\"姓名\" ></el-table-column>\n            <el-table-column prop=\"sex\" label=\"性别\"></el-table-column>\n            <el-table-column prop=\"phone\" label=\"电话\" ></el-table-column>\n            <el-table-column prop=\"email\" label=\"邮箱\"></el-table-column>\n            <el-table-column prop=\"role\" label=\"身份\"></el-table-column>\n            <el-table-column prop=\"createTime\" label=\"创建时间\"></el-table-column>\n            <el-table-column fixed=\"right\" label=\"操作\" width=\"300px\">\n                <template #default=\"scope\">\n                    <el-button size=\"mini\" type=\"primary\" @click=\"$router.push('/user/update?id=' + scope.row.id)\">编辑</el-button>\n                    &nbsp;\n                    <el-popconfirm title=\"您确定要重置吗吗?\" @confirm=\"handleSet(scope.row.id)\">\n                        <template #reference>\n                            <el-button size=\"mini\" type=\"success\">重置密码</el-button>\n                        </template>\n                    </el-popconfirm>\n                    &nbsp;\n                    <el-popconfirm title=\"您确定要删除吗?\" @confirm=\"handleDelete(scope.row.id)\">\n                        <template #reference>\n                            <el-button size=\"mini\" type=\"danger\">删除</el-button>\n                        </template>\n                    </el-popconfirm>\n                </template>\n            </el-table-column>\n        </el-table>\n\n        <!--分页-->\n        <div style=\"margin-top: 20px\">\n            <el-pagination\n                    background\n                    @size-change=\"handleSizeChange\"\n                    @current-change=\"handleCurrentChange\"\n                    layout=\"total, sizes, prev, pager, next, jumper\"\n                    :current-page=\"params.pageNum\"\n                    :page-sizes=\"[5, 10, 20]\"\n                    :page-size=\"params.pageSize\"\n                    :total=\"total\">\n            </el-pagination>\n        </div>\n\n    </div>\n\n</template>\n\n<script>\n\n    import request from \"../../utils/request\";\n\n    export default {\n        name: \"list\",\n        data() {\n            return {\n                total: '',\n                tableData: [],\n                params: {\n                    username: '',\n                    name: '',\n                    phone: '',\n                    role: '',\n                    pageNum: 1,\n                    pageSize: 10,\n                },\n            }\n        },\n        //页面加载之后会调用\n        created() {\n            this.load();\n        },\n        methods: {\n\n            load() {\n                request.get(\"/user/page\", { params: this.params }).then(res => {\n                    if (res.code === '200'){\n                        this.tableData = res.data.list;\n                        this.total = res.data.total;\n                    } else {\n                        alert(res.msg);\n                    }\n                })\n            },\n\n            reset() {\n                this.params = {\n                    name: '',\n                    phone: '',\n                    role: '',\n                    pageNum: 1,\n                    pageSize: 10,\n                };\n                this.load();\n            },\n\n            handleCurrentChange(pageNum){\n                this.params.pageNum = pageNum;\n                this.load();\n            },\n\n            handleSizeChange(pageSize){\n                this.params.pageSize = pageSize;\n                this.load();\n            },\n\n            handleSet(id){\n                request.post('/user/update/' + id).then(res => {\n                    if (res.code === '200'){\n                        this.$notify.success(\"重置密码成功\");\n                    } else {\n                        alert(res.msg);\n                    }\n                })\n            },\n\n            handleDelete(id){\n                request.delete('/user/delete/' + id).then(res => {\n                    if (res.code === '200'){\n                        alert(\"删除成功\");\n                        this.load();\n                    } else {\n                        alert(res.msg);\n                    }\n                })\n            },\n\n        }\n    }\n</script>\n\n<style scoped>\n\n</style>"],"mappings":"AAgEA,OAAAA,OAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,KAAA;MACAC,SAAA;MACAC,MAAA;QACAC,QAAA;QACAL,IAAA;QACAM,KAAA;QACAC,IAAA;QACAC,OAAA;QACAC,QAAA;MACA;IACA;EACA;EACA;EACAC,QAAA;IACA,KAAAC,IAAA;EACA;EACAC,OAAA;IAEAD,KAAA;MACAZ,OAAA,CAAAc,GAAA;QAAAT,MAAA,OAAAA;MAAA,GAAAU,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAAb,SAAA,GAAAY,GAAA,CAAAd,IAAA,CAAAgB,IAAA;UACA,KAAAf,KAAA,GAAAa,GAAA,CAAAd,IAAA,CAAAC,KAAA;QACA;UACAgB,KAAA,CAAAH,GAAA,CAAAI,GAAA;QACA;MACA;IACA;IAEAC,MAAA;MACA,KAAAhB,MAAA;QACAJ,IAAA;QACAM,KAAA;QACAC,IAAA;QACAC,OAAA;QACAC,QAAA;MACA;MACA,KAAAE,IAAA;IACA;IAEAU,oBAAAb,OAAA;MACA,KAAAJ,MAAA,CAAAI,OAAA,GAAAA,OAAA;MACA,KAAAG,IAAA;IACA;IAEAW,iBAAAb,QAAA;MACA,KAAAL,MAAA,CAAAK,QAAA,GAAAA,QAAA;MACA,KAAAE,IAAA;IACA;IAEAY,UAAAC,EAAA;MACAzB,OAAA,CAAA0B,IAAA,mBAAAD,EAAA,EAAAV,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAAU,OAAA,CAAAC,OAAA;QACA;UACAT,KAAA,CAAAH,GAAA,CAAAI,GAAA;QACA;MACA;IACA;IAEAS,aAAAJ,EAAA;MACAzB,OAAA,CAAA8B,MAAA,mBAAAL,EAAA,EAAAV,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACAE,KAAA;UACA,KAAAP,IAAA;QACA;UACAO,KAAA,CAAAH,GAAA,CAAAI,GAAA;QACA;MACA;IACA;EAEA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}