{"ast":null,"code":"import request from \"../../utils/request\";\nexport default {\n  name: \"list\",\n  data() {\n    return {\n      total: '',\n      tableData: [],\n      params: {\n        courseName: '',\n        courseCode: '',\n        pageNum: 1,\n        pageSize: 10\n      }\n    };\n  },\n  //页面加载之后会调用\n  created() {\n    this.load();\n  },\n  methods: {\n    load() {\n      request.get(\"/course/page\", {\n        params: this.params\n      }).then(res => {\n        if (res.code === '200') {\n          this.tableData = res.data.list;\n          this.total = res.data.total;\n        } else {\n          alert(res.msg);\n        }\n      });\n    },\n    reset() {\n      this.params = {\n        courseName: '',\n        courseCode: '',\n        pageNum: 1,\n        pageSize: 10\n      };\n      this.load();\n    },\n    handleCurrentChange(pageNum) {\n      this.params.pageNum = pageNum;\n      this.load();\n    },\n    handleSizeChange(pageSize) {\n      this.params.pageSize = pageSize;\n      this.load();\n    },\n    changeStatus(row) {\n      request.put('/course/change/' + row.id).then(res => {\n        if (res.code === '200') {\n          this.$notify.success(\"购买状态更新成功\");\n          this.load();\n        } else {\n          this.$notify.error(res.msg);\n        }\n      });\n    },\n    handleDelete(id) {\n      request.delete('/course/delete/' + id).then(res => {\n        if (res.code === '200') {\n          alert(\"删除成功\");\n          this.load();\n        } else {\n          alert(res.msg);\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["request","name","data","total","tableData","params","courseName","courseCode","pageNum","pageSize","created","load","methods","get","then","res","code","list","alert","msg","reset","handleCurrentChange","handleSizeChange","changeStatus","row","put","id","$notify","success","error","handleDelete","delete"],"sources":["src/views/course/list.vue"],"sourcesContent":["<template>\n    <div>\n\n        <!--搜索框-->\n        <div style=\"margin-bottom: 15px\">\n            <el-input style=\"width: 240px\" placeholder=\"请输入景点名\" v-model=\"params.courseName\"></el-input>\n            <el-input style=\"width: 240px; margin-left: 5px\" placeholder=\"请输入景点代码\" v-model=\"params.courseCode\"></el-input>\n            <el-button style=\"margin-left: 5px\" type=\"primary\" @click=\"load\"><i class=\"el-icon-search\"></i>&ensp;搜索</el-button>\n            <el-button style=\"margin-left: 5px\" type=\"warning\" @click=\"reset\"><i class=\"el-icon-refresh\"></i>&ensp;重置</el-button>\n        </div>\n\n        <el-table :data=\"tableData\" border stripe>\n            <el-table-column prop=\"id\" label=\"编号\" ></el-table-column>\n            <el-table-column prop=\"courseName\" label=\"景点名\" ></el-table-column>\n            <el-table-column prop=\"courseCode\" label=\"景点代码\"></el-table-column>\n            <el-table-column prop=\"begin\" label=\"起始\" ></el-table-column>\n            <el-table-column prop=\"end\" label=\"结束\"></el-table-column>\n            <el-table-column fixed=\"right\" label=\"操作\" width=\"350px\">\n                <template #default=\"scope\">\n                    <el-tooltip placement=\"top\">\n                        <div slot=\"content\" v-if=\"scope.row.status === 1\">购票退票权限已开放</div>\n                        <div slot=\"content\" v-if=\"scope.row.status === 0\">购票退票权限已关闭</div>\n                        <el-switch\n                                v-model=\"scope.row.status\"\n                                active-color=\"#13ce66\"\n                                inactive-color=\"#ff4949\"\n                                @change=\"changeStatus(scope.row)\"\n                                :active-value=\"1\"\n                                :inactive-value=\"0\" >\n                        </el-switch>\n                    </el-tooltip>\n                    &nbsp;\n                    <el-button size=\"mini\" style=\"margin-left: 5px\" type=\"primary\" @click=\"$router.push('/course/update?id=' + scope.row.id)\">编辑</el-button>\n                    &nbsp;\n                    <el-popconfirm title=\"您确定要删除吗?\" @confirm=\"handleDelete(scope.row.id)\">\n                        <template #reference>\n                            <el-button size=\"mini\" type=\"danger\">删除</el-button>\n                        </template>\n                    </el-popconfirm>\n                </template>\n            </el-table-column>\n        </el-table>\n\n        <!--分页-->\n        <div style=\"margin-top: 20px\">\n            <el-pagination\n                    background\n                    @size-change=\"handleSizeChange\"\n                    @current-change=\"handleCurrentChange\"\n                    layout=\"total, sizes, prev, pager, next, jumper\"\n                    :current-page=\"params.pageNum\"\n                    :page-sizes=\"[5, 10, 20]\"\n                    :page-size=\"params.pageSize\"\n                    :total=\"total\">\n            </el-pagination>\n        </div>\n\n    </div>\n\n</template>\n\n<script>\n\n    import request from \"../../utils/request\";\n\n    export default {\n        name: \"list\",\n        data() {\n            return {\n                total: '',\n                tableData: [],\n                params: {\n                    courseName: '',\n                    courseCode: '',\n                    pageNum: 1,\n                    pageSize: 10,\n                },\n            }\n        },\n        //页面加载之后会调用\n        created() {\n            this.load();\n        },\n        methods: {\n\n            load() {\n                request.get(\"/course/page\", { params: this.params }).then(res => {\n                    if (res.code === '200'){\n                        this.tableData = res.data.list;\n                        this.total = res.data.total;\n                    } else {\n                        alert(res.msg);\n                    }\n                })\n            },\n\n            reset() {\n                this.params = {\n                    courseName: '',\n                    courseCode: '',\n                    pageNum: 1,\n                    pageSize: 10,\n                };\n                this.load();\n            },\n\n            handleCurrentChange(pageNum){\n                this.params.pageNum = pageNum;\n                this.load();\n            },\n\n            handleSizeChange(pageSize){\n                this.params.pageSize = pageSize;\n                this.load();\n            },\n\n            changeStatus(row) {\n                request.put('/course/change/' + row.id).then(res => {\n                    if (res.code === '200'){\n                        this.$notify.success(\"购买状态更新成功\");\n                        this.load();\n                    } else {\n                        this.$notify.error(res.msg);\n                    }\n                })\n            },\n\n            handleDelete(id){\n                request.delete('/course/delete/' + id).then(res => {\n                    if (res.code === '200'){\n                        alert(\"删除成功\");\n                        this.load();\n                    } else {\n                        alert(res.msg);\n                    }\n                })\n            },\n\n        }\n    }\n</script>\n\n<style scoped>\n\n</style>"],"mappings":"AA+DA,OAAAA,OAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,KAAA;MACAC,SAAA;MACAC,MAAA;QACAC,UAAA;QACAC,UAAA;QACAC,OAAA;QACAC,QAAA;MACA;IACA;EACA;EACA;EACAC,QAAA;IACA,KAAAC,IAAA;EACA;EACAC,OAAA;IAEAD,KAAA;MACAX,OAAA,CAAAa,GAAA;QAAAR,MAAA,OAAAA;MAAA,GAAAS,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAAZ,SAAA,GAAAW,GAAA,CAAAb,IAAA,CAAAe,IAAA;UACA,KAAAd,KAAA,GAAAY,GAAA,CAAAb,IAAA,CAAAC,KAAA;QACA;UACAe,KAAA,CAAAH,GAAA,CAAAI,GAAA;QACA;MACA;IACA;IAEAC,MAAA;MACA,KAAAf,MAAA;QACAC,UAAA;QACAC,UAAA;QACAC,OAAA;QACAC,QAAA;MACA;MACA,KAAAE,IAAA;IACA;IAEAU,oBAAAb,OAAA;MACA,KAAAH,MAAA,CAAAG,OAAA,GAAAA,OAAA;MACA,KAAAG,IAAA;IACA;IAEAW,iBAAAb,QAAA;MACA,KAAAJ,MAAA,CAAAI,QAAA,GAAAA,QAAA;MACA,KAAAE,IAAA;IACA;IAEAY,aAAAC,GAAA;MACAxB,OAAA,CAAAyB,GAAA,qBAAAD,GAAA,CAAAE,EAAA,EAAAZ,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAAW,OAAA,CAAAC,OAAA;UACA,KAAAjB,IAAA;QACA;UACA,KAAAgB,OAAA,CAAAE,KAAA,CAAAd,GAAA,CAAAI,GAAA;QACA;MACA;IACA;IAEAW,aAAAJ,EAAA;MACA1B,OAAA,CAAA+B,MAAA,qBAAAL,EAAA,EAAAZ,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACAE,KAAA;UACA,KAAAP,IAAA;QACA;UACAO,KAAA,CAAAH,GAAA,CAAAI,GAAA;QACA;MACA;IACA;EAEA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}