{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport request from \"../../utils/request\";\nimport Cookies from 'js-cookie';\nexport default {\n  name: \"myCourse\",\n  data() {\n    return {\n      tableData: [],\n      user: Cookies.get('user') ? JSON.parse(Cookies.get('user')) : {},\n      username: {},\n      params: {\n        id: ''\n      }\n    };\n  },\n  //页面加载之后会调用\n  created() {\n    this.user = Cookies.get('user') ? JSON.parse(Cookies.get('user')) : {};\n    this.username = this.user.username;\n    this.load();\n  },\n  methods: {\n    load() {\n      request.get(\"/tea/myTeachList/\" + this.username).then(res => {\n        if (res.code === '200') {\n          this.tableData = res.data;\n        } else {\n          alert(res.msg);\n        }\n      });\n    },\n    record(row) {\n      if (row.now === 0) {\n        this.$notify.error(\"该课程无人选哦，不需要进行管理~\");\n      } else {\n        this.$router.push('/tea/score?id=' + row.id);\n      }\n    },\n    educe(row) {\n      this.params.id = row.id;\n      if (row.now === 0) {\n        this.$notify.error(\"该课程无人选哦，不需要导出~\");\n      } else {\n        request.get(\"/tea/export\", {\n          params: this.params,\n          responseType: 'blob'\n        }).then(res => {\n          const link = document.createElement('a');\n          const blob = new Blob([res], {\n            type: 'application/vnd.ms-excel'\n          });\n          link.style.display = 'none';\n          link.href = URL.createObjectURL(blob);\n          link.setAttribute('download', row.courseName + `成绩.xlsx`);\n          document.body.appendChild(link);\n          link.click();\n          document.body.removeChild(link);\n        });\n      }\n    },\n    manage(row) {\n      if (row.now === 0) {\n        this.$notify.error(\"该课程无人选哦，不需要进行管理~\");\n      } else {\n        this.$router.push('/tea/manageScore?id=' + row.id);\n      }\n    }\n  }\n};","map":{"version":3,"names":["request","Cookies","name","data","tableData","user","get","JSON","parse","username","params","id","created","load","methods","then","res","code","alert","msg","record","row","now","$notify","error","$router","push","educe","responseType","link","document","createElement","blob","Blob","type","style","display","href","URL","createObjectURL","setAttribute","courseName","body","appendChild","click","removeChild","manage"],"sources":["src/views/tea/myCourse.vue"],"sourcesContent":["<template>\n    <div>\n\n        <el-table :data=\"tableData\" border stripe>\n            <el-table-column prop=\"courseName\" label=\"课程名\"></el-table-column>\n            <el-table-column prop=\"courseCode\" label=\"课程代码\" ></el-table-column>\n            <el-table-column prop=\"day\" label=\"时间\" ></el-table-column>\n            <el-table-column prop=\"time\" label=\"时间\" ></el-table-column>\n            <el-table-column prop=\"begin\" label=\"起始周\" ></el-table-column>\n            <el-table-column prop=\"end\" label=\"结束周\" ></el-table-column>\n            <el-table-column prop=\"roomName\" label=\"教室\"></el-table-column>\n            <el-table-column prop=\"now\" label=\"课堂人数\"></el-table-column>\n            <el-table-column fixed=\"right\" label=\"操作\" width=\"300px\">\n                <template #default=\"scope\">\n                    <el-button size=\"mini\" type=\"primary\" @click=\"record(scope.row)\"> 成绩录入 </el-button>\n                    &nbsp;\n                    <el-button size=\"mini\" type=\"success\" @click=\"educe(scope.row)\"> 成绩导出 </el-button>\n                    &nbsp;\n                    <el-button size=\"mini\" type=\"primary\" @click=\"manage(scope.row)\"> 成绩管理 </el-button>\n                </template>\n            </el-table-column>\n        </el-table>\n\n    </div>\n\n</template>\n\n<script>\n\n    import request from \"../../utils/request\";\n    import Cookies from 'js-cookie';\n\n    export default {\n        name: \"myCourse\",\n        data() {\n            return {\n                tableData: [],\n                user: Cookies.get('user') ? JSON.parse(Cookies.get('user')) : {},\n                username: {},\n                params: {\n                    id: '',\n                }\n            }\n        },\n\n        //页面加载之后会调用\n        created() {\n            this.user = Cookies.get('user') ? JSON.parse(Cookies.get('user')) : {};\n            this.username = this.user.username;\n            this.load();\n        },\n\n        methods: {\n\n            load() {\n                request.get(\"/tea/myTeachList/\" + this.username).then(res => {\n                    if (res.code === '200'){\n                        this.tableData = res.data;\n                    } else {\n                        alert(res.msg);\n                    }\n                })\n            },\n\n            record(row) {\n                if (row.now === 0){\n                    this.$notify.error(\"该课程无人选哦，不需要进行管理~\")\n                } else {\n                    this.$router.push('/tea/score?id=' + row.id);\n                }\n            },\n\n            educe(row) {\n                this.params.id = row.id;\n                if (row.now === 0){\n                    this.$notify.error(\"该课程无人选哦，不需要导出~\");\n                } else {\n                    request.get(\"/tea/export\",{ params: this.params, responseType: 'blob'}).then((res) => {\n                        const link = document.createElement('a');\n                        const blob = new Blob([res], { type: 'application/vnd.ms-excel' });\n                        link.style.display = 'none';\n                        link.href = URL.createObjectURL(blob);\n                        link.setAttribute('download', row.courseName +`成绩.xlsx`);\n                        document.body.appendChild(link);\n                        link.click();\n                        document.body.removeChild(link);\n                    });\n                }\n            },\n\n            manage(row){\n                if (row.now === 0){\n                    this.$notify.error(\"该课程无人选哦，不需要进行管理~\")\n                } else {\n                    this.$router.push('/tea/manageScore?id=' + row.id);\n                }\n            }\n        }\n    }\n</script>\n\n<style scoped>\n\n</style>"],"mappings":";AA6BA,OAAAA,OAAA;AACA,OAAAC,OAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,SAAA;MACAC,IAAA,EAAAJ,OAAA,CAAAK,GAAA,WAAAC,IAAA,CAAAC,KAAA,CAAAP,OAAA,CAAAK,GAAA;MACAG,QAAA;MACAC,MAAA;QACAC,EAAA;MACA;IACA;EACA;EAEA;EACAC,QAAA;IACA,KAAAP,IAAA,GAAAJ,OAAA,CAAAK,GAAA,WAAAC,IAAA,CAAAC,KAAA,CAAAP,OAAA,CAAAK,GAAA;IACA,KAAAG,QAAA,QAAAJ,IAAA,CAAAI,QAAA;IACA,KAAAI,IAAA;EACA;EAEAC,OAAA;IAEAD,KAAA;MACAb,OAAA,CAAAM,GAAA,4BAAAG,QAAA,EAAAM,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAAb,SAAA,GAAAY,GAAA,CAAAb,IAAA;QACA;UACAe,KAAA,CAAAF,GAAA,CAAAG,GAAA;QACA;MACA;IACA;IAEAC,OAAAC,GAAA;MACA,IAAAA,GAAA,CAAAC,GAAA;QACA,KAAAC,OAAA,CAAAC,KAAA;MACA;QACA,KAAAC,OAAA,CAAAC,IAAA,oBAAAL,GAAA,CAAAV,EAAA;MACA;IACA;IAEAgB,MAAAN,GAAA;MACA,KAAAX,MAAA,CAAAC,EAAA,GAAAU,GAAA,CAAAV,EAAA;MACA,IAAAU,GAAA,CAAAC,GAAA;QACA,KAAAC,OAAA,CAAAC,KAAA;MACA;QACAxB,OAAA,CAAAM,GAAA;UAAAI,MAAA,OAAAA,MAAA;UAAAkB,YAAA;QAAA,GAAAb,IAAA,CAAAC,GAAA;UACA,MAAAa,IAAA,GAAAC,QAAA,CAAAC,aAAA;UACA,MAAAC,IAAA,OAAAC,IAAA,EAAAjB,GAAA;YAAAkB,IAAA;UAAA;UACAL,IAAA,CAAAM,KAAA,CAAAC,OAAA;UACAP,IAAA,CAAAQ,IAAA,GAAAC,GAAA,CAAAC,eAAA,CAAAP,IAAA;UACAH,IAAA,CAAAW,YAAA,aAAAnB,GAAA,CAAAoB,UAAA;UACAX,QAAA,CAAAY,IAAA,CAAAC,WAAA,CAAAd,IAAA;UACAA,IAAA,CAAAe,KAAA;UACAd,QAAA,CAAAY,IAAA,CAAAG,WAAA,CAAAhB,IAAA;QACA;MACA;IACA;IAEAiB,OAAAzB,GAAA;MACA,IAAAA,GAAA,CAAAC,GAAA;QACA,KAAAC,OAAA,CAAAC,KAAA;MACA;QACA,KAAAC,OAAA,CAAAC,IAAA,0BAAAL,GAAA,CAAAV,EAAA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}