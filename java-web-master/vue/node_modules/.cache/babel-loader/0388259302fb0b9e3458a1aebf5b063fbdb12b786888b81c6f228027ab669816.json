{"ast":null,"code":"import request from \"../../utils/request\";\nimport Cookies from 'js-cookie';\nexport default {\n  name: \"myScore\",\n  data() {\n    return {\n      tableData: [],\n      user: Cookies.get('user') ? JSON.parse(Cookies.get('user')) : {},\n      params: {\n        username: '',\n        courseName: '',\n        level: ''\n      }\n    };\n  },\n  //页面加载之后会调用\n  created() {\n    this.user = Cookies.get('user') ? JSON.parse(Cookies.get('user')) : {};\n    this.params.username = this.user.username;\n    this.load();\n  },\n  methods: {\n    load() {\n      request.get(\"/stu/score\", {\n        params: this.params\n      }).then(res => {\n        if (res.code === '200') {\n          this.tableData = res.data;\n        } else {\n          alert(res.msg);\n        }\n      });\n    },\n    educe() {\n      request.get(\"/stu/export\", {\n        params: this.params,\n        responseType: 'blob'\n      }).then(res => {\n        const link = document.createElement('a');\n        const blob = new Blob([res], {\n          type: 'application/vnd.ms-excel'\n        });\n        link.style.display = 'none';\n        link.href = URL.createObjectURL(blob);\n        link.setAttribute('download', `成绩.xlsx`);\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n      });\n    },\n    scoreFormat(row) {\n      return row.score === -1 ? '成绩未录入' : row.score;\n    }\n  }\n};","map":{"version":3,"names":["request","Cookies","name","data","tableData","user","get","JSON","parse","params","username","courseName","level","created","load","methods","then","res","code","alert","msg","educe","responseType","link","document","createElement","blob","Blob","type","style","display","href","URL","createObjectURL","setAttribute","body","appendChild","click","removeChild","scoreFormat","row","score"],"sources":["src/views/stu/myScore.vue"],"sourcesContent":["<template>\n    <div>\n\n        <!--搜索框-->\n        <div style=\"margin-bottom: 15px\">\n            <el-input style=\"width: 240px; margin-left: 5px\" placeholder=\"请输入课程名\" v-model=\"params.courseName\"></el-input>\n            <el-select v-model=\"params.level\" style=\"margin-left: 5px; width: 100px\" placeholder=\"请选择类型\">\n                <el-option label=\"全部\" value=\"\"></el-option>\n                <el-option label=\"未成功\" value=\"1\"></el-option>\n            </el-select>\n            <el-button style=\"margin-left: 5px\" type=\"primary\" @click=\"load\"><i class=\"el-icon-search\"></i>&ensp;搜索</el-button>\n            <el-button style=\"margin-left: 5px\" type=\"success\" @click=\"educe\"><i class=\"el-icon-refresh\"></i>&ensp;导出成绩 </el-button>\n        </div>\n\n        <el-table :data=\"tableData\" border stripe>\n            <el-table-column prop=\"courseName\" label=\"课程名\"></el-table-column>\n            <el-table-column prop=\"courseCode\" label=\"课程代码\" ></el-table-column>\n            <el-table-column prop=\"teacherName\" label=\"教师姓名\" ></el-table-column>\n            <el-table-column prop=\"score\" :formatter=\"scoreFormat\" label=\"总评成绩\" ></el-table-column>\n        </el-table>\n\n    </div>\n\n</template>\n\n<script>\n\n    import request from \"../../utils/request\";\n    import Cookies from 'js-cookie';\n\n    export default {\n        name: \"myScore\",\n        data() {\n            return {\n                tableData: [],\n                user: Cookies.get('user') ? JSON.parse(Cookies.get('user')) : {},\n                params: {\n                    username: '',\n                    courseName:'',\n                    level: '',\n                },\n            }\n        },\n\n        //页面加载之后会调用\n        created() {\n            this.user = Cookies.get('user') ? JSON.parse(Cookies.get('user')) : {};\n            this.params.username = this.user.username;\n            this.load();\n        },\n\n        methods: {\n\n            load() {\n                request.get(\"/stu/score\",{ params: this.params }).then(res => {\n                    if (res.code === '200'){\n                        this.tableData = res.data;\n                    } else {\n                        alert(res.msg);\n                    }\n                })\n            },\n\n            educe() {\n                request.get(\"/stu/export\",{ params: this.params, responseType: 'blob'}).then((res) => {\n                    const link = document.createElement('a');\n                    const blob = new Blob([res], { type: 'application/vnd.ms-excel' });\n                    link.style.display = 'none';\n                    link.href = URL.createObjectURL(blob);\n                    link.setAttribute('download', `成绩.xlsx`);\n                    document.body.appendChild(link);\n                    link.click();\n                    document.body.removeChild(link);\n                });\n            },\n\n            scoreFormat(row){\n              return row.score === -1 ? '成绩未录入' : row.score;\n            }\n\n        }\n    }\n</script>\n\n<style scoped>\n\n</style>"],"mappings":"AA2BA,OAAAA,OAAA;AACA,OAAAC,OAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,SAAA;MACAC,IAAA,EAAAJ,OAAA,CAAAK,GAAA,WAAAC,IAAA,CAAAC,KAAA,CAAAP,OAAA,CAAAK,GAAA;MACAG,MAAA;QACAC,QAAA;QACAC,UAAA;QACAC,KAAA;MACA;IACA;EACA;EAEA;EACAC,QAAA;IACA,KAAAR,IAAA,GAAAJ,OAAA,CAAAK,GAAA,WAAAC,IAAA,CAAAC,KAAA,CAAAP,OAAA,CAAAK,GAAA;IACA,KAAAG,MAAA,CAAAC,QAAA,QAAAL,IAAA,CAAAK,QAAA;IACA,KAAAI,IAAA;EACA;EAEAC,OAAA;IAEAD,KAAA;MACAd,OAAA,CAAAM,GAAA;QAAAG,MAAA,OAAAA;MAAA,GAAAO,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAAd,SAAA,GAAAa,GAAA,CAAAd,IAAA;QACA;UACAgB,KAAA,CAAAF,GAAA,CAAAG,GAAA;QACA;MACA;IACA;IAEAC,MAAA;MACArB,OAAA,CAAAM,GAAA;QAAAG,MAAA,OAAAA,MAAA;QAAAa,YAAA;MAAA,GAAAN,IAAA,CAAAC,GAAA;QACA,MAAAM,IAAA,GAAAC,QAAA,CAAAC,aAAA;QACA,MAAAC,IAAA,OAAAC,IAAA,EAAAV,GAAA;UAAAW,IAAA;QAAA;QACAL,IAAA,CAAAM,KAAA,CAAAC,OAAA;QACAP,IAAA,CAAAQ,IAAA,GAAAC,GAAA,CAAAC,eAAA,CAAAP,IAAA;QACAH,IAAA,CAAAW,YAAA;QACAV,QAAA,CAAAW,IAAA,CAAAC,WAAA,CAAAb,IAAA;QACAA,IAAA,CAAAc,KAAA;QACAb,QAAA,CAAAW,IAAA,CAAAG,WAAA,CAAAf,IAAA;MACA;IACA;IAEAgB,YAAAC,GAAA;MACA,OAAAA,GAAA,CAAAC,KAAA,oBAAAD,GAAA,CAAAC,KAAA;IACA;EAEA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}