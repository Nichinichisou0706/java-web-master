{"ast":null,"code":"import request from \"../../utils/request\";\nimport Cookies from 'js-cookie';\nexport default {\n  name: \"recordScore\",\n  data() {\n    return {\n      user: Cookies.get('user') ? JSON.parse(Cookies.get('user')) : {},\n      username: '',\n      teachId: '',\n      tableData: [],\n      params: {\n        id: ''\n      }\n    };\n  },\n  created() {\n    const id = this.$route.query.id;\n    if (id === '' || id == null) {\n      this.$notify.warning(\"请从任课信息进入该页面哦~\");\n    } else {\n      this.username = Cookies.get('user').username;\n      this.params.id = id;\n      this.load();\n    }\n  },\n  methods: {\n    load() {\n      request.get(\"/tea/manageScore\", {\n        params: this.params\n      }).then(res => {\n        if (res.code === '200') {\n          this.tableData = res.data;\n        } else {\n          alert(res.msg);\n        }\n      });\n    },\n    save() {\n      request.post(\"/tea/updateAll\", this.tableData).then(res => {\n        if (res.code === '200') {\n          this.$notify.success(\"成绩录入成功~\");\n          this.load();\n        } else {\n          this.$notify.error(res.msg);\n        }\n      });\n    },\n    scoreFormat(row) {\n      return row.score === -1 ? '成绩未录入' : row.score;\n    }\n  }\n};","map":{"version":3,"names":["request","Cookies","name","data","user","get","JSON","parse","username","teachId","tableData","params","id","created","$route","query","$notify","warning","load","methods","then","res","code","alert","msg","save","post","success","error","scoreFormat","row","score"],"sources":["src/views/tea/recordScore.vue"],"sourcesContent":["<template>\n    <div>\n        <el-table :data=\"tableData\" stripe border style=\"width: 450px\">\n            <el-table-column prop=\"studentId\" label=\"用户名\" ></el-table-column>\n            <el-table-column prop=\"studentName\" label=\"姓名\"></el-table-column>\n            <el-table-column prop=\"score\" label=\"价格\" :formatter=\"scoreFormat\">\n                <template slot-scope=\"scope\">\n                    <el-input\n                        :formatter=\"scoreFormat\"\n                        @blur=\"maxLen = $event.target.value\"\n                        oninput=\"value = value.replace(/\\D/g, '').replace(/^0{1,}/g, '').replace('-1')\"\n                        v-model=\"scope.row.score\">\n                    </el-input>\n                </template>\n            </el-table-column>\n        </el-table>\n        <el-button style=\"margin-top: 10px; margin-left: 5px\" type=\"primary\" @click=\"save\">提交</el-button>\n    </div>\n\n</template>\n\n<script>\n\n    import request from \"../../utils/request\";\n    import Cookies from 'js-cookie';\n\n    export default {\n        name: \"recordScore\",\n        data() {\n            return {\n                user: Cookies.get('user') ? JSON.parse(Cookies.get('user')) : {},\n                username: '',\n                teachId: '',\n                tableData: [],\n                params: {\n                    id: '',\n                }\n            }\n        },\n        created() {\n            const id = this.$route.query.id;\n            if (id === '' || id == null){\n                this.$notify.warning(\"请从任课信息进入该页面哦~\");\n            } else {\n                this.username = Cookies.get('user').username;\n                this.params.id = id;\n                this.load();\n            }\n        },\n        methods: {\n            load() {\n                request.get(\"/tea/manageScore\", { params: this.params }).then(res => {\n                    if (res.code === '200'){\n                        this.tableData = res.data;\n                    } else {\n                        alert(res.msg);\n                    }\n                })\n            },\n            save() {\n                request.post(\"/tea/updateAll\",this.tableData).then(res => {\n                    if (res.code === '200'){\n                        this.$notify.success(\"成绩录入成功~\");\n                        this.load();\n                    } else {\n                        this.$notify.error(res.msg);\n                    }\n                })\n            },\n            scoreFormat(row){\n                return row.score === -1 ? '成绩未录入' : row.score;\n            }\n        }\n    }\n</script>\n\n<style scoped>\n\n</style>"],"mappings":"AAuBA,OAAAA,OAAA;AACA,OAAAC,OAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,IAAA,EAAAH,OAAA,CAAAI,GAAA,WAAAC,IAAA,CAAAC,KAAA,CAAAN,OAAA,CAAAI,GAAA;MACAG,QAAA;MACAC,OAAA;MACAC,SAAA;MACAC,MAAA;QACAC,EAAA;MACA;IACA;EACA;EACAC,QAAA;IACA,MAAAD,EAAA,QAAAE,MAAA,CAAAC,KAAA,CAAAH,EAAA;IACA,IAAAA,EAAA,WAAAA,EAAA;MACA,KAAAI,OAAA,CAAAC,OAAA;IACA;MACA,KAAAT,QAAA,GAAAP,OAAA,CAAAI,GAAA,SAAAG,QAAA;MACA,KAAAG,MAAA,CAAAC,EAAA,GAAAA,EAAA;MACA,KAAAM,IAAA;IACA;EACA;EACAC,OAAA;IACAD,KAAA;MACAlB,OAAA,CAAAK,GAAA;QAAAM,MAAA,OAAAA;MAAA,GAAAS,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAAZ,SAAA,GAAAW,GAAA,CAAAlB,IAAA;QACA;UACAoB,KAAA,CAAAF,GAAA,CAAAG,GAAA;QACA;MACA;IACA;IACAC,KAAA;MACAzB,OAAA,CAAA0B,IAAA,wBAAAhB,SAAA,EAAAU,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAAN,OAAA,CAAAW,OAAA;UACA,KAAAT,IAAA;QACA;UACA,KAAAF,OAAA,CAAAY,KAAA,CAAAP,GAAA,CAAAG,GAAA;QACA;MACA;IACA;IACAK,YAAAC,GAAA;MACA,OAAAA,GAAA,CAAAC,KAAA,oBAAAD,GAAA,CAAAC,KAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}