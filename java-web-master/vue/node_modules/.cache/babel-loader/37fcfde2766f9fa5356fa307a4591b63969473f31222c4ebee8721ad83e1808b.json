{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport request from \"../../utils/request\";\nimport Cookies from 'js-cookie';\nexport default {\n  name: \"searchList\",\n  data() {\n    return {\n      // 轮播图图片地址\n      carouselImages: [require('@/assets/banner1.jpeg'), require('@/assets/banner2.jpeg'), require('@/assets/banner3.jpeg'), require('@/assets/banner4.jpeg'), require('@/assets/banner5.jpeg'), require('@/assets/banner6.jpeg')],\n      tableData: [],\n      user: Cookies.get('user') ? JSON.parse(Cookies.get('user')) : {},\n      total: '',\n      params: {\n        username: '',\n        courseCode: '',\n        courseName: '',\n        pageNum: 1,\n        pageSize: 10\n      },\n      searchCourseParams: {\n        teachId: '',\n        studentId: ''\n      }\n    };\n  },\n  //页面加载之后会调用\n  created() {\n    this.user = Cookies.get('user') ? JSON.parse(Cookies.get('user')) : {};\n    this.params.username = this.user.username;\n    this.load();\n  },\n  methods: {\n    load() {\n      request.get(\"/stu/searchList\", {\n        params: this.params\n      }).then(res => {\n        if (res.code === '200') {\n          this.tableData = res.data.list;\n          this.total = res.data.total;\n        } else {\n          alert(res.msg);\n        }\n      });\n    },\n    reset() {\n      this.params.courseCode = '';\n      this.params.courseName = '';\n      this.padding.pageNum = 1;\n      this.padding.pageSize = 10;\n      this.load();\n    },\n    handleCurrentChange(pageNum) {\n      this.params.pageNum = pageNum;\n      this.load();\n    },\n    handleSizeChange(pageSize) {\n      this.params.pageSize = pageSize;\n      this.load();\n    },\n    handleEdit(id) {\n      this.searchCourseParams.teachId = id;\n      this.searchCourseParams.studentId = this.user.username;\n      request.post(\"/stu/add\", this.searchCourseParams).then(res => {\n        if (res.code === '200') {\n          alert(\"选购成功\");\n          this.$router.push('/stu/myCourse'); // 跳转到 myCourse 页面\n        } else {\n          alert(res.msg);\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["request","Cookies","name","data","carouselImages","require","tableData","user","get","JSON","parse","total","params","username","courseCode","courseName","pageNum","pageSize","searchCourseParams","teachId","studentId","created","load","methods","then","res","code","list","alert","msg","reset","padding","handleCurrentChange","handleSizeChange","handleEdit","id","post","$router","push"],"sources":["src/views/common/Index.vue"],"sourcesContent":["<template>\n  <div>\n    <!-- 轮播图 -->\n    <el-carousel :interval=\"5000\" arrow=\"always\">\n      <el-carousel-item v-for=\"(image, index) in carouselImages\" :key=\"index\">\n        <img :src=\"image\" alt=\"旅游图片\" style=\"width: 100%; height: 400px; object-fit: cover;\">\n      </el-carousel-item>\n    </el-carousel>\n\n    <p>\n        京城漫游，一触即达——探索古都魅力，乐享智慧旅程！\n    </p>\n    <p style=\"color:#42b983\">\n        Explore Beijing, One Tap Away — Discover Ancient Charms, Enjoy Smart Travel!\n    </p>\n    <br>\n    <p>\n        短暂的逃离西西弗斯式生活，让身心和时间属于自己。\n    </p>\n\n    <!-- 新增景点预定搜索框 -->\n    <div style=\"margin-bottom: 15px\">\n      <el-input style=\"width: 240px\" placeholder=\"请输入景点代码\" v-model=\"params.courseCode\"></el-input>\n      <el-input style=\"width: 240px; margin-left: 5px\" placeholder=\"请输入景点名\" v-model=\"params.courseName\"></el-input>\n      <el-button style=\"margin-left: 5px\" type=\"primary\" @click=\"load\"><i class=\"el-icon-search\"></i>&ensp;搜索</el-button>\n    </div>\n\n    <!-- 新增景点预定表格 -->\n    <el-table :data=\"tableData\" border stripe>\n      <el-table-column prop=\"teacherName\" label=\"商家姓名\" ></el-table-column>\n      <el-table-column prop=\"courseName\" label=\"景点名\"></el-table-column>\n      <el-table-column prop=\"courseCode\" label=\"景点代码\" ></el-table-column>\n      <el-table-column prop=\"day\" label=\"时间\" ></el-table-column>\n      <el-table-column prop=\"time\" label=\"时间\" ></el-table-column>\n      <el-table-column prop=\"begin\" label=\"起始\" ></el-table-column>\n      <el-table-column prop=\"end\" label=\"结束\" ></el-table-column>\n      <el-table-column prop=\"roomName\" label=\"地点\"></el-table-column>\n      <el-table-column fixed=\"right\" label=\"操作\" width=\"150px\">\n        <template #default=\"scope\">\n          <el-button size=\"mini\" type=\"primary\" v-if=\"scope.row.now < scope.row.max\" @click=\"handleEdit(scope.row.id)\">选购</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <!-- 新增分页 -->\n    <div style=\"margin-top: 20px\">\n      <el-pagination\n        background\n        @size-change=\"handleSizeChange\"\n        @current-change=\"handleCurrentChange\"\n        layout=\"total, sizes, prev, pager, next, jumper\"\n        :current-page=\"params.pageNum\"\n        :page-sizes=\"[5, 10, 20]\"\n        :page-size=\"params.pageSize\"\n        :total=\"total\">\n      </el-pagination>\n    </div>\n\n    <div class=\"links-link\">\n      <a href=\"https://github.com/Nichinichisou0706/java-web-master.git\" target=\"_blank\">代码仓库</a>\n    </div>\n    <!-- 底部信息 -->\n    <el-footer style=\"background-color: #333; color: white; text-align: center; padding: 20px;\">\n      <p>版权所有 &copy; 2024 京城漫游网站      联系电话: 152-6096-8634</p>\n    </el-footer>\n  </div>\n</template>\n\n\n\n<script>\n\nimport request from \"../../utils/request\";\nimport Cookies from 'js-cookie';\n\nexport default {\n    name: \"searchList\",\n    data() {\n        return {\n            // 轮播图图片地址\n            carouselImages: [\n            require('@/assets/banner1.jpeg'),\n            require('@/assets/banner2.jpeg'),\n            require('@/assets/banner3.jpeg'),\n            require('@/assets/banner4.jpeg'),\n            require('@/assets/banner5.jpeg'),\n            require('@/assets/banner6.jpeg')\n      ],\n            tableData: [],\n            user: Cookies.get('user') ? JSON.parse(Cookies.get('user')) : {},\n            total: '',\n            params: {\n                username: '',\n                courseCode:'',\n                courseName:'',\n                pageNum: 1,\n                pageSize: 10,\n            },\n            searchCourseParams: {\n                teachId: '',\n                studentId: '',\n            }\n        }\n    },\n\n    //页面加载之后会调用\n    created() {\n        this.user = Cookies.get('user') ? JSON.parse(Cookies.get('user')) : {};\n        this.params.username = this.user.username;\n        this.load();\n    },\n\n    methods: {\n\n        load() {\n            request.get(\"/stu/searchList\", { params: this.params }).then(res => {\n                if (res.code === '200'){\n                    this.tableData = res.data.list;\n                    this.total = res.data.total;\n                } else {\n                    alert(res.msg);\n                }\n            })\n        },\n\n        reset() {\n            this.params.courseCode = '';\n            this.params.courseName = '';\n            this.padding.pageNum = 1;\n            this.padding.pageSize = 10;\n            this.load();\n        },\n\n        handleCurrentChange(pageNum){\n            this.params.pageNum = pageNum;\n            this.load();\n        },\n\n        handleSizeChange(pageSize){\n            this.params.pageSize = pageSize;\n            this.load();\n        },\n\n        handleEdit(id){\n            this.searchCourseParams.teachId = id;\n            this.searchCourseParams.studentId = this.user.username;\n            request.post(\"/stu/add\", this.searchCourseParams).then(res => {\n                if (res.code === '200'){\n                  alert(\"选购成功\");\n                  this.$router.push('/stu/myCourse'); // 跳转到 myCourse 页面\n                } else {\n                    alert(res.msg);\n                }\n            })\n        },\n\n    }\n}\n</script>\n\n<style scoped>\n\n</style>"],"mappings":";AAwEA,OAAAA,OAAA;AACA,OAAAC,OAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACA;MACAC,cAAA,GACAC,OAAA,2BACAA,OAAA,2BACAA,OAAA,2BACAA,OAAA,2BACAA,OAAA,2BACAA,OAAA,0BACA;MACAC,SAAA;MACAC,IAAA,EAAAN,OAAA,CAAAO,GAAA,WAAAC,IAAA,CAAAC,KAAA,CAAAT,OAAA,CAAAO,GAAA;MACAG,KAAA;MACAC,MAAA;QACAC,QAAA;QACAC,UAAA;QACAC,UAAA;QACAC,OAAA;QACAC,QAAA;MACA;MACAC,kBAAA;QACAC,OAAA;QACAC,SAAA;MACA;IACA;EACA;EAEA;EACAC,QAAA;IACA,KAAAd,IAAA,GAAAN,OAAA,CAAAO,GAAA,WAAAC,IAAA,CAAAC,KAAA,CAAAT,OAAA,CAAAO,GAAA;IACA,KAAAI,MAAA,CAAAC,QAAA,QAAAN,IAAA,CAAAM,QAAA;IACA,KAAAS,IAAA;EACA;EAEAC,OAAA;IAEAD,KAAA;MACAtB,OAAA,CAAAQ,GAAA;QAAAI,MAAA,OAAAA;MAAA,GAAAY,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAApB,SAAA,GAAAmB,GAAA,CAAAtB,IAAA,CAAAwB,IAAA;UACA,KAAAhB,KAAA,GAAAc,GAAA,CAAAtB,IAAA,CAAAQ,KAAA;QACA;UACAiB,KAAA,CAAAH,GAAA,CAAAI,GAAA;QACA;MACA;IACA;IAEAC,MAAA;MACA,KAAAlB,MAAA,CAAAE,UAAA;MACA,KAAAF,MAAA,CAAAG,UAAA;MACA,KAAAgB,OAAA,CAAAf,OAAA;MACA,KAAAe,OAAA,CAAAd,QAAA;MACA,KAAAK,IAAA;IACA;IAEAU,oBAAAhB,OAAA;MACA,KAAAJ,MAAA,CAAAI,OAAA,GAAAA,OAAA;MACA,KAAAM,IAAA;IACA;IAEAW,iBAAAhB,QAAA;MACA,KAAAL,MAAA,CAAAK,QAAA,GAAAA,QAAA;MACA,KAAAK,IAAA;IACA;IAEAY,WAAAC,EAAA;MACA,KAAAjB,kBAAA,CAAAC,OAAA,GAAAgB,EAAA;MACA,KAAAjB,kBAAA,CAAAE,SAAA,QAAAb,IAAA,CAAAM,QAAA;MACAb,OAAA,CAAAoC,IAAA,kBAAAlB,kBAAA,EAAAM,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACAE,KAAA;UACA,KAAAS,OAAA,CAAAC,IAAA;QACA;UACAV,KAAA,CAAAH,GAAA,CAAAI,GAAA;QACA;MACA;IACA;EAEA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}