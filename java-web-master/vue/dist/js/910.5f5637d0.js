"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[910],{2910:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});var l=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticStyle:{"margin-bottom":"15px"}},[t("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入职工号"},model:{value:e.params.teacherId,callback:function(t){e.$set(e.params,"teacherId",t)},expression:"params.teacherId"}}),t("el-input",{staticStyle:{width:"240px","margin-left":"5px"},attrs:{placeholder:"请输入课程代码"},model:{value:e.params.courseCode,callback:function(t){e.$set(e.params,"courseCode",t)},expression:"params.courseCode"}}),t("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary"},on:{click:e.load}},[t("i",{staticClass:"el-icon-search"}),e._v(" 搜索")]),t("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"warning"},on:{click:e.reset}},[t("i",{staticClass:"el-icon-refresh"}),e._v(" 重置")]),t("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"success"},on:{click:e.add}},[t("i",{staticClass:"el-icon-add-location"}),e._v(" 新增排课")])],1),t("el-table",{attrs:{data:e.tableData,stripe:""}},[t("el-table-column",{attrs:{prop:"teacherId",label:"职工号"}}),t("el-table-column",{attrs:{prop:"teacherName",label:"教师姓名"}}),t("el-table-column",{attrs:{prop:"courseName",label:"课程名"}}),t("el-table-column",{attrs:{prop:"courseCode",label:"课程代码"}}),t("el-table-column",{attrs:{prop:"day",label:"时间"}}),t("el-table-column",{attrs:{prop:"time",label:"时间"}}),t("el-table-column",{attrs:{prop:"begin",label:"起始周"}}),t("el-table-column",{attrs:{prop:"end",label:"结束周"}}),t("el-table-column",{attrs:{prop:"roomName",label:"教室"}}),t("el-table-column",{attrs:{prop:"now",label:"已选人数"}}),t("el-table-column",{attrs:{prop:"max",label:"限选人数"}}),t("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-popconfirm",{attrs:{title:"您确定要删除吗?"},on:{confirm:function(t){return e.handleDelete(a.row.id)}},scopedSlots:e._u([{key:"reference",fn:function(){return[t("el-button",{attrs:{size:"mini",type:"danger"}},[e._v("删除")])]},proxy:!0}],null,!0)})]}}])})],1),t("div",{staticStyle:{"margin-top":"20px"}},[t("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","current-page":e.params.pageNum,"page-sizes":[5,10,20],"page-size":e.params.pageSize,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),t("el-dialog",{attrs:{title:"新增排课",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}},scopedSlots:e._u([{key:"footer",fn:function(){return[t("span",{staticClass:"dialog-footer"},[t("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("确认")])],1)]},proxy:!0}])},[t("el-form",{ref:"ruleForm",attrs:{model:e.form,"label-width":"120px",rules:e.rules}},[t("el-form-item",{attrs:{label:"教师名字",prop:"teacherName"}},[t("el-input",{staticStyle:{width:"75%"},attrs:{readonly:""},model:{value:e.form.teacherName,callback:function(t){e.$set(e.form,"teacherName",t)},expression:"form.teacherName"}})],1),t("el-form-item",{attrs:{label:"教师职工号",prop:"teacherId"}},[t("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择"},on:{change:e.setTeacher},model:{value:e.form.teacherId,callback:function(t){e.$set(e.form,"teacherId",t)},expression:"form.teacherId"}},e._l(e.teachers,(function(e){return t("el-option",{key:e.id,attrs:{label:e.username,value:e.username}})})),1)],1),t("el-form-item",{attrs:{label:"课程名",prop:"courseName"}},[t("el-input",{staticStyle:{width:"75%"},attrs:{readonly:""},model:{value:e.form.courseName,callback:function(t){e.$set(e.form,"courseName",t)},expression:"form.courseName"}})],1),t("el-form-item",{attrs:{label:"课程代码",prop:"courseCode"}},[t("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择"},on:{change:e.setCourse},model:{value:e.form.courseCode,callback:function(t){e.$set(e.form,"courseCode",t)},expression:"form.courseCode"}},e._l(e.courses,(function(e){return t("el-option",{key:e.id,attrs:{label:e.courseCode,value:e.courseCode}})})),1)],1),t("el-form-item",{attrs:{label:"起始周"}},[t("el-input",{staticStyle:{width:"30%"},attrs:{readonly:""},model:{value:e.form.begin,callback:function(t){e.$set(e.form,"begin",t)},expression:"form.begin"}})],1),t("el-form-item",{attrs:{label:"结束周"}},[t("el-input",{staticStyle:{width:"30%"},attrs:{readonly:""},model:{value:e.form.end,callback:function(t){e.$set(e.form,"end",t)},expression:"form.end"}})],1),t("el-form-item",{attrs:{label:"星期几",prop:"day"}},[t("el-select",{attrs:{placeholder:"请选择周几上课"},model:{value:e.form.day,callback:function(t){e.$set(e.form,"day",t)},expression:"form.day"}},[t("el-option",{attrs:{label:"周一",value:"周一"}}),t("el-option",{attrs:{label:"周二",value:"周二"}}),t("el-option",{attrs:{label:"周三",value:"周三"}}),t("el-option",{attrs:{label:"周四",value:"周四"}}),t("el-option",{attrs:{label:"周五",value:"周五"}}),t("el-option",{attrs:{label:"周六",value:"周六"}}),t("el-option",{attrs:{label:"周七",value:"周七"}})],1)],1),t("el-form-item",{attrs:{label:"上课时间",prop:"time"}},[t("el-select",{attrs:{placeholder:"请选择上课时间"},model:{value:e.form.time,callback:function(t){e.$set(e.form,"time",t)},expression:"form.time"}},[t("el-option",{attrs:{label:"8:00-9:40",value:"8:00-9:40"}}),t("el-option",{attrs:{label:"10:10-11:50",value:"10:10-11:50"}}),t("el-option",{attrs:{label:"2:00-3:40",value:"2:00-3:40"}}),t("el-option",{attrs:{label:"4:00-5:40",value:"4:00-5:40"}}),t("el-option",{attrs:{label:"7:00-8:40",value:"7:00-8:40"}})],1)],1),t("el-form-item",{attrs:{label:"上课教室",prop:"roomId"}},[t("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择"},model:{value:e.form.roomId,callback:function(t){e.$set(e.form,"roomId",t)},expression:"form.roomId"}},e._l(e.rooms,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),t("el-form-item",{attrs:{label:"限选人数",prop:"max"}},[t("el-input",{staticStyle:{width:"30%"},model:{value:e.form.max,callback:function(t){e.$set(e.form,"max",t)},expression:"form.max"}})],1)],1)],1)],1)},r=[],o=a(4471),s={name:"list",data(){const e=(e,t,a)=>{if(!t)return a(new Error("输入不可以为空"));setTimeout((()=>{if(Number(t)){const e=/^[1-9][0-9]{0,1}$/,l=e.test(t);l?a():a(new Error("请输入正整数，值为【1,99】"))}else a(new Error("请输入正整数"))}),0)};return{total:"",dialogVisible:!1,tableData:[],rooms:[],courses:[],teachers:[],form:{},params:{teacherId:"",courseCode:"",pageNum:1,pageSize:10},rules:{day:[{required:!0,message:"请选择周几上课",trigger:"blur"}],time:[{required:!0,message:"请选择上课时间",trigger:"blur"}],teacherId:[{required:!0,message:"请选择教师职工号",trigger:"blur"}],courseCode:[{required:!0,message:"请选择课程代码",trigger:"blur"}],roomId:[{required:!0,message:"请选择上课教室",trigger:"blur"}],max:[{validator:e,trigger:"blur"}]}}},created(){this.init(),this.load()},methods:{init(){o.Z.get("/teach/room/list").then((e=>{this.rooms=e.data})),o.Z.get("/user/teacher/list").then((e=>{this.teachers=e.data})),o.Z.get("/course/list").then((e=>{this.courses=e.data}))},setTeacher(){let e=this.teachers.find((e=>e.username===this.form.teacherId));o.Z.get("/user/"+e.id).then((e=>{this.$set(this.form,"teacherName",e.data.name)}))},setCourse(){let e=this.courses.find((e=>e.courseCode===this.form.courseCode));o.Z.get("/course/"+e.id).then((e=>{this.$set(this.form,"courseName",e.data.courseName),this.$set(this.form,"begin",e.data.begin),this.$set(this.form,"end",e.data.end)}))},load(){o.Z.get("/teach/page",{params:this.params}).then((e=>{"200"===e.code?(this.tableData=e.data.list,this.total=e.data.total):alert(e.msg)}))},reset(){this.params={teacherId:"",courseCode:"",pageNum:1,pageSize:10},this.load()},handleCurrentChange(e){this.params.pageNum=e,this.load()},handleSizeChange(e){this.params.pageSize=e,this.load()},handleDelete(e){o.Z["delete"]("/teach/delete/"+e).then((e=>{"200"===e.code?(alert("删除成功"),this.load()):alert(e.msg)}))},add(){this.form={},this.dialogVisible=!0},save(){this.$refs["ruleForm"].validate((e=>{e&&o.Z.post("/teach/add",this.form).then((e=>{"200"===e.code?(this.$notify.success("排课成功"),this.form={},this.dialogVisible=!1,this.load()):this.$notify.error(e.msg)}))}))}}},i=s,n=a(1001),c=(0,n.Z)(i,l,r,!1,null,"02b4fe28",null),m=c.exports}}]);
//# sourceMappingURL=910.5f5637d0.js.map