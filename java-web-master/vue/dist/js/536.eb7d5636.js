"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[536],{1536:function(e,s,t){t.r(s),t.d(s,{default:function(){return d}});t(7658);var r=function(){var e=this,s=e._self._c;return s("div",{staticStyle:{height:"100vh",position:"relative",overflow:"hidden"}},[e.loginUser.id?s("el-card",{staticClass:"cover"},[s("slide-verify",{attrs:{l:42,r:10,w:310,h:155,accuracy:5,imgs:["https://cdn.pixabay.com/photo/2022/11/09/12/23/lotus-7580478_960_720.jpg","https://cdn.pixabay.com/photo/2017/08/29/12/07/adult-2693054_960_720.jpg","https://cdn.pixabay.com/photo/2022/11/16/15/52/mushrooms-7596258_960_720.jpg"],"slider-text":"向右滑动"},on:{success:e.onSuccess,fail:e.onFail,refresh:e.onRefresh}})],1):e._e(),s("div",{staticStyle:{width:"500px",height:"350px","background-color":"papayawhip","border-radius":"10px",margin:"150px auto",padding:"50px"}},[s("div",{staticStyle:{margin:"30px","text-align":"center","font-size":"30px","font-weight":"bold",color:"dodgerblue"}},[e._v("欢 迎 登 录")]),s("el-form",{ref:"loginForm",attrs:{model:e.user,rules:e.rules}},[s("el-form-item",{attrs:{prop:"username"}},[s("el-input",{attrs:{placeholder:"请输入账号","prefix-icon":"el-icon-user",size:"medium"},model:{value:e.user.username,callback:function(s){e.$set(e.user,"username",s)},expression:"user.username"}})],1),s("el-form-item",{attrs:{prop:"password"}},[s("el-input",{attrs:{type:"password","show-password":"show-password",placeholder:"请输入密码","prefix-icon":"el-icon-lock",size:"medium"},model:{value:e.user.password,callback:function(s){e.$set(e.user,"password",s)},expression:"user.password"}})],1),s("div",[e._v(e._s(e.msg))]),s("el-form-item",[s("el-button",{staticStyle:{width:"35%","margin-left":"40px"},attrs:{size:"medium",type:"primary"},on:{click:function(s){return e.$router.push("/enroll")}}},[e._v("注册")]),s("el-button",{staticStyle:{width:"35%","margin-left":"20px"},attrs:{size:"medium",type:"primary"},on:{click:e.login}},[e._v("登录")])],1),s("a",{staticStyle:{float:"right","margin-right":"5px"},attrs:{href:"javascript:void 0"},on:{click:e.forgetPassword}},[e._v("找回密码")])],1)],1),s("el-dialog",{attrs:{title:"找回密码",visible:e.dialogFormVisible,width:"30%"},on:{"update:visible":function(s){e.dialogFormVisible=s}}},[s("el-form",{ref:"passForm",attrs:{model:e.form,rules:e.passRules,"label-width":"100px",size:"small"}},[s("el-form-item",{attrs:{label:"用户名",prop:"username"}},[s("el-input",{attrs:{size:"medium",autocomplete:"off"},model:{value:e.form.username,callback:function(s){e.$set(e.form,"username",s)},expression:"form.username"}})],1),s("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[s("el-input",{attrs:{size:"medium",autocomplete:"off"},model:{value:e.form.email,callback:function(s){e.$set(e.form,"email",s)},expression:"form.email"}})],1),s("el-form-item",{attrs:{label:"验证码"}},[s("el-input",{staticStyle:{width:"200px"},attrs:{size:"medium"},model:{value:e.form.code,callback:function(s){e.$set(e.form,"code",s)},expression:"form.code"}}),s("el-button",{staticClass:"ml-5",staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"medium"},on:{click:e.sendEmailCode}},[e._v("获取验证码")])],1)],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(s){e.dialogFormVisible=!1}}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:e.resetPassword}},[e._v("重置密码")])],1)],1)],1)},o=[],i=t(4471),a=t(1955),l={name:"login",data(){const e=(e,s,t)=>{const r=/^([a-zA-Z0-9]+[-_\.]?)+@[a-zA-Z0-9]+\.[a-z]+$/;""===s||void 0===s||null==s?t(new Error("请输入邮箱")):r.test(s)?t():t(new Error("请输入正确的邮箱地址"))};return{loginUser:{},user:{},form:{},code:"",username:"",dialogFormVisible:!1,rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},passRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],email:[{validator:e,trigger:"blur"}]}}},created(){this.form={},this.code={},this.username={}},methods:{login(){null!=a.Z.get("user")&&a.Z.remove("user"),this.$refs["loginForm"].validate((e=>{e&&i.Z.post("/user/login",this.user).then((e=>{"200"===e.code?null!=e.data&&(this.loginUser=e.data):this.$notify.error(e.msg)}))}))},onSuccess(){a.Z.set("user",JSON.stringify(this.loginUser)),alert("登陆成功,欢迎使用!"),this.$router.push("/")},onFail(){console.log("onFail")},onRefresh(){console.log("refresh")},forgetPassword(){this.form={},this.username={},this.dialogFormVisible=!0},sendEmailCode(){this.$refs["passForm"].validate((e=>{e&&i.Z.post("/user/remind",this.form).then((e=>{"200"===e.code?(this.code=e.data.substring(0,4),this.username=e.data.substring(4),this.$notify.success("验证码发送成功，请耐心等待~~")):this.$notify.error(e.msg)}))}))},resetPassword(){this.$refs["passForm"].validate((e=>{e&&(this.code===this.form.code&&this.username===this.form.username?i.Z.post("/user/reset",this.form).then((e=>{"200"===e.code?(this.$notify.success("密码重置成功，为了账户安全，请登录后进入个人信息页面修改密码~"),this.form={},this.dialogFormVisible=!1):this.$notify.error(e.msg)})):this.$notify.error("验证码不正确哦~"))}))}}},n=l,m=t(1001),u=(0,m.Z)(n,r,o,!1,null,"4bfbce20",null),d=u.exports}}]);
//# sourceMappingURL=536.eb7d5636.js.map